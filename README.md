# üìª TeleTalkie

–í–∏–¥–µ–æ—Ä–∞—Ü–∏—è —Å Push-to-Talk (PTT) - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ—Å–≤—è–∑–∏ –≤ —Å—Ç–∏–ª–µ —Ä–∞—Ü–∏–∏, –≥–¥–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Push-to-Talk (PTT)** - –∑–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ
- **–í–∏–¥–µ–æ + –∞—É–¥–∏–æ** - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –≤–∏–¥–µ–æ—Å–≤—è–∑—å —á–µ—Ä–µ–∑ WebRTC MediaRecorder –∏ Media Source Extensions (MSE)
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç** - —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑–Ω—ã–º –∫–æ–º–Ω–∞—Ç–∞–º
- **–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** - –≤–∏–¥–∏—Ç–µ –≤—Å–µ—Ö, –∫—Ç–æ –≤ —ç—Ñ–∏—Ä–µ
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏ live-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- **–ú–æ–±–∏–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö —á–µ—Ä–µ–∑ HTTPS

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WebRTC

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd teletalkie

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
go run cmd/teletalkie/main.go
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8080`

### –ó–∞–ø—É—Å–∫ —Å HTTPS (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)

–î–ª—è —Ä–∞–±–æ—Ç—ã –∫–∞–º–µ—Ä—ã –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è HTTPS:

```bash
go run cmd/teletalkie/main.go --tls
```

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://localhost:8080`

> ‚ö†Ô∏è –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `--tls` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –û–ø—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞

```bash
# –£–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç
go run cmd/teletalkie/main.go --port 3000

# HTTPS —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø–æ—Ä—Ç–æ–º
go run cmd/teletalkie/main.go --tls --port 3000
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É**: –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
2. **–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –∫–∞–º–µ—Ä–µ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
3. **–ù–∞–∂–º–∏—Ç–µ –∏ –¥–µ—Ä–∂–∏—Ç–µ** –∫–Ω–æ–ø–∫—É PTT (–∏–ª–∏ –ø—Ä–æ–±–µ–ª) —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É
4. **–û—Ç–ø—É—Å—Ç–∏—Ç–µ** –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —ç—Ñ–∏—Ä

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

- **–ú—ã—à—å/—Ç–∞—á**: –ù–∞–∂–º–∏—Ç–µ –∏ –¥–µ—Ä–∂–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–∞–∂–º–∏ —á—Ç–æ–±—ã –≥–æ–≤–æ—Ä–∏—Ç—å"
- **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞**: –ù–∞–∂–º–∏—Ç–µ –∏ –¥–µ—Ä–∂–∏—Ç–µ **–ø—Ä–æ–±–µ–ª**

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Go)

- `cmd/teletalkie/main.go` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `internal/server/server.go` - HTTP/WebSocket —Å–µ—Ä–≤–µ—Ä
- `internal/room/room.go` - –ª–æ–≥–∏–∫–∞ –∫–æ–º–Ω–∞—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PTT
- `internal/tlsgen/tlsgen.go` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- `web/web.go` - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (JavaScript)

- `web/index.html` - HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
- `web/app.js` - WebSocket, MediaRecorder, MSE –ª–æ–≥–∏–∫–∞
- `web/style.css` - —Å—Ç–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –ü—Ä–æ—Ç–æ–∫–æ–ª

–ë–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —á–µ—Ä–µ–∑ WebSocket:

**Client ‚Üí Server:**
- `0x01` - PTT_ON (–∑–∞–ø—Ä–æ—Å —ç—Ñ–∏—Ä–∞)
- `0x02` - PTT_OFF (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —ç—Ñ–∏—Ä–∞)
- `0x03` - MEDIA_CHUNK (–º–µ–¥–∏–∞-–¥–∞–Ω–Ω—ã–µ –æ—Ç –≥–æ–≤–æ—Ä—è—â–µ–≥–æ)

**Server ‚Üí Client:**
- `0x10` - PTT_GRANTED (—ç—Ñ–∏—Ä –∑–∞—Ö–≤–∞—á–µ–Ω)
- `0x11` - PTT_DENIED (—ç—Ñ–∏—Ä –∑–∞–Ω—è—Ç)
- `0x12` - PTT_RELEASED (—ç—Ñ–∏—Ä –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è)
- `0x13` - RELAY_CHUNK (–º–µ–¥–∏–∞-–¥–∞–Ω–Ω—ã–µ –æ—Ç –≥–æ–≤–æ—Ä—è—â–µ–≥–æ)
- `0x14` - PEER_INFO (JSON: —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Go 1.21+, WebSocket ([nhooyr.io/websocket](https://github.com/coder/websocket))
- **Frontend**: Vanilla JavaScript, WebRTC MediaRecorder API, Media Source Extensions (MSE)
- **–ö–æ–¥–µ–∫**: WebM (VP8 + Opus)

## üìù TODO

- [ ] –ó–∞–ø–∏—Å—å —Å–µ—Å—Å–∏–π
- [ ] –†–µ–∞–∫—Ü–∏–∏ –∏ —ç–º–æ–¥–∑–∏
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å–µ—Ç–∏
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–Ω–∞—Ç
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –í–∫–ª–∞–¥

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.
